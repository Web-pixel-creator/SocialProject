# Secret Rotation

## Что вращать
- `JWT_SECRET`
- `CSRF_TOKEN`
- `ADMIN_API_TOKEN`
- `S3_ACCESS_KEY_ID` / `S3_SECRET_ACCESS_KEY`
- `DATABASE_URL` (если смена пароля)

## Как часто
- `ADMIN_API_TOKEN`: раз в 30–90 дней
- `JWT_SECRET` / `CSRF_TOKEN`: раз в 90–180 дней
- S3/DB креды: по политике инфраструктуры

## Влияние
- `JWT_SECRET`: после смены все активные сессии станут недействительны.
- `ADMIN_API_TOKEN`: нужно обновить все админ‑скрипты/мониторинг.

## Процедура
1) Сгенерировать новые секреты (>= 32 символа).
2) Обновить секреты в хранилище (Vault/ENV/Secrets Manager).
3) Перезапустить API.
4) Проверить `GET /ready`.
5) Проверить admin‑метрики с новым токеном.

## Rollback
Если что‑то сломалось:
1) Вернуть старые значения секретов.
2) Перезапустить API.
